%macro heavyDrinking(out=heavyDrinking, cchs_data=, demographics=, adultsOnly=true);%local out cchs_data demographics adultsOnly;  %validate(data=&cchs_data,include=&demographics) data &out; set &cchs_data.(keep=ont_id alc_020 dhh_age &demographics); select(alc_020); when(3,4,5,6) heavyDrinking = 1; when(1,2,96) heavyDrinking = 0; otherwise heavyDrinking = .; end; %if %upcase(&adultsOnly) = TRUE %then %do; if dhh_age < 19 then do; heavyDrinking = .; exclude = 1; end;%end;%else %if %upcase(&adultsOnly) = FALSE %then %do; %put ======================================; %put Population exclusion was not applied; %put ======================================;%end;%else %do; %put ======================================; %put The following error occurred:; %put Valid options for adultsOnly are TRUE or FALSE.; %put Please review and try again.; %put The macro will stop execution.; %put ======================================; %abort;%end;run;%mend heavyDrinking;